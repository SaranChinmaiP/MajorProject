const URL="https://teachablemachine.withgoogle.com/models/e3BmwIkIA/";var handIsThere=!1;console.log("Hands.js Script is Runnig");const video3=document.getElementsByClassName("input_video3")[0],out3=document.getElementsByClassName("webcam-container")[0],canvasCtx3=out3.getContext("2d"),out1=document.getElementsByClassName("crop-container")[0],crop=out1.getContext("2d"),controlsElement3=document.getElementsByClassName("control3")[0],fpsControl=new FPS,STATUS_BOX=document.getElementById("status");function onResultsHands(results){if(crop.drawImage(out3,150,28,224,224,0,0,224,224),document.body.classList.add("loaded"),fpsControl.tick(),canvasCtx3.save(),canvasCtx3.clearRect(0,0,out3.width,out3.height),canvasCtx3.drawImage(results.image,0,0,out3.width,out3.height),canvasCtx3.beginPath(),canvasCtx3.rect(150,30,224,224),canvasCtx3.lineWidth=.5,canvasCtx3.strokeStyle="black",canvasCtx3.stroke(),results.multiHandLandmarks&&results.multiHandedness){handIsThere=!0;for(let index=0;index<results.multiHandLandmarks.length;index++){const classification=results.multiHandedness[index],isRightHand="Right"===classification.label,landmarks=results.multiHandLandmarks[index];drawConnectors(canvasCtx3,landmarks,HAND_CONNECTIONS,{color:"#FFFFFF",lineWidth:2}),drawLandmarks(canvasCtx3,landmarks,{color:"#FF0000",fillColor:"#FF0000",radius:x=>lerp(x.from.z,.5,.1,10,1)})}}else handIsThere=!1;canvasCtx3.restore()}const hands=new Hands({locateFile:file=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.1/${file}`});hands.onResults(onResultsHands);const camera=new Camera(video3,{onFrame:async()=>{await hands.send({image:video3})},width:400,height:400});let model,webcam,labelContainer,maxPredictions;camera.start(),new ControlPanel(controlsElement3,{selfieMode:!0,maxNumHands:2,minDetectionConfidence:.7,minTrackingConfidence:.7}).add([new StaticText({title:"MediaPipe Hands"}),fpsControl,new Toggle({title:"Selfie Mode",field:"selfieMode"}),new Slider({title:"Max Number of Hands",field:"maxNumHands",range:[1,4],step:1}),new Slider({title:"Min Detection Confidence",field:"minDetectionConfidence",range:[0,1],step:.01}),new Slider({title:"Min Tracking Confidence",field:"minTrackingConfidence",range:[0,1],step:.01})]).on(options=>{video3.classList.toggle("selfie",options.selfieMode),hands.setOptions(options)}),canvasCtx3.beginPath(),canvasCtx3.rect(150,30,224,224),canvasCtx3.lineWidth=.5,canvasCtx3.strokeStyle="black",canvasCtx3.stroke(),console.log("Script.js is Runnig");const words=["Dummy","Dummy2"];let speech=new SpeechSynthesisUtterance;const WIDTH=375,HEIGHT=410;var speechSwitch=document.getElementById("SpeechSwitch"),isChecked=document.getElementById("GraphSwitch"),gdata=[["Element","%",{role:"style"}],["Label",50,"gold"]];async function init(){const modelURL=URL+"model.json",metadataURL=URL+"metadata.json";model=await tmImage.load(modelURL,metadataURL),maxPredictions=model.getTotalClasses(),console.log(maxPredictions);const flip=!0;webcam=new tmImage.Webcam(375,410,!0),console.log("Model Started "),window.requestAnimationFrame(loop)}async function PauseCam(){video3.pause()}async function PlayCam(){video3.play()}async function loop(){webcam.update(),handIsThere?await predict():STATUS_BOX.innerText="Hand🤚Not❎Detected ",window.requestAnimationFrame(loop)}async function predict(){const prediction=await model.predict(out1);var max=Math.max.apply(null,Object.keys(prediction).map((function(e){return prediction[e].probability})));1==isChecked.checked&&(console.log("Input is checked"),(gdata=prediction.map((function(a){return[a.className,Math.floor(100*a.probability)]}))).unshift(["Label","Confidence"]));const Factor=Math.floor(100*max);if(Factor>65){const index=prediction.findIndex(element=>element.probability===max);console.log(prediction[index].className+" : "+Factor+"%"),STATUS_BOX.innerText="Sign : "+prediction[index].className+" : "+Factor+"% (confidence rate)",words[0]=prediction[index].className}function drawChart(){var data=google.visualization.arrayToDataTable(gdata),options={title:"Recognition Confidence Rate ",width:375,height:400,bar:{groupWidth:"10%"},legend:{position:"none"}},chart;new google.visualization.BarChart(document.getElementById("myChart")).draw(data,options)}Factor<55&&(STATUS_BOX.innerText="🤔💭Try to fit the Hand in the Box✊"),1==speechSwitch.checked&&words[1]!=words[0]&&null!=words[0]&&(console.log("I am Speaking"),speech.text=words[0],speechSynthesis.speak(speech),words[1]=words[0]),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(drawChart)}